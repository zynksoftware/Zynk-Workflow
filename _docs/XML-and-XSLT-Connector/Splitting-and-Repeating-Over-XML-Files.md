---
slug: splitting-and-repeating-over-xml-files
title: Splitting and Repeating Over XML Files
---
The XML Split and Repeat task will take a large XML file and split it into a series of smaller XML files, then loop through each of the files it generates running a series of sub tasks for each one. Essentially, this task combines the [XML Split](splitting-xml-files) and [File Repeater](file-repeater) tasks into one.

## Settings
### Input File
_Required_  
The XML file to be processed.

### Output Files Format
_Required_  
Used to control the format of the output files generated by the task, the name is built up of the input file appended with a unique value based on this setting. Defaults to `Number`. The following options are available: -

 - **Number** - will append an incrementing number starting from 1 e.g. an input of `orders.xml` could result in `orders_123.xml`
 - **Timestamp** - will append a timestamp e.g. an input of `orders.xml` could result in `orders_201912051559315403023.xml`

### Output Folder
_Required_  
The output folder for the split XML files. All output files generated by the task will be created in this folder with a name based on Input File and Output Files Format.

### Record Limit
_Required_  
The maximum number of records each XML file should contain. Defaults to `200`. Only integer values greater than or equal to 1 will be accepted.

### Retention Option
_Required_  
Used to control what happens to the XML split files generated by this task once each one has been looped over. The following options are available:

 - **None** - The split files will be left in the output folder.
 - **Archive** - The split files will be moved to the workflow's working directory, so they can be archived by the [Archive Workflow Data](archive-workflow-data) task.
 - **Delete** - The split files will be deleted from the output folder.

### XPath Query
_Required_  
The XPath query that specifies each row of data that needs to be split e.g. `Company/Products/Product`

### Zynk Settings
See [Common Task Settings](common-task-settings)

## Examples
A sample input file is shown below, containing two stock transactions to be split into separate files. To achieve this, the XPath Query setting should be set to `Company/StockTransactions/StockTransaction`, and the Record Limit should be set to `1`.

```xml
<?xml version="1.0"?>
<Company xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <StockTransactions>
        <StockTransaction>
            <UniqueId>1</UniqueId>
            <StockTransactionType>AdjustmentIn</StockTransactionType>
            <StockCode>BOARD001</StockCode>
            <StockTransactionDate>2006-12-31T00:00:00</StockTransactionDate>
            <Reference>STK TAKE</Reference>
            <Details>Whiteboard - Drywipe (900 x 1200)</Details>
            <Qty>2</Qty>
            <CostPrice>15</CostPrice>
            <SalesPrice>0</SalesPrice>
            <StockTransactionNumber>1</StockTransactionNumber>
        </StockTransaction>
        <StockTransaction>
            <UniqueId>2</UniqueId>
            <StockTransactionType>AdjustmentIn</StockTransactionType>
            <StockCode>BOARD002</StockCode>
            <StockTransactionDate>2006-12-31T00:00:00</StockTransactionDate>
            <Reference>STK TAKE</Reference>
            <Details>Whiteboard - Drywipe (1000 x 1500)</Details>
            <Qty>2</Qty>
            <CostPrice>17</CostPrice>
            <SalesPrice>0</SalesPrice>
            <StockTransactionNumber>2</StockTransactionNumber>
        </StockTransaction>
    </StockTransactions>
</Company>
```

Two output files will be created, as shown below, each including a single stock transaction:

```xml
<?xml version="1.0"?>
<Company xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <StockTransactions>
        <StockTransaction>
            <UniqueId>1</UniqueId>
            <StockTransactionType>AdjustmentIn</StockTransactionType>
            <StockCode>BOARD001</StockCode>
            <StockTransactionDate>2006-12-31T00:00:00</StockTransactionDate>
            <Reference>STK TAKE</Reference>
            <Details>Whiteboard - Drywipe (900 x 1200)</Details>
            <Qty>2</Qty>
            <CostPrice>15</CostPrice>
            <SalesPrice>0</SalesPrice>
            <StockTransactionNumber>1</StockTransactionNumber>
        </StockTransaction>
    </StockTransactions>
</Company>
```

```xml
<?xml version="1.0"?>
<Company xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <StockTransactions>
        <StockTransaction>
            <UniqueId>2</UniqueId>
            <StockTransactionType>AdjustmentIn</StockTransactionType>
            <StockCode>BOARD002</StockCode>
            <StockTransactionDate>2006-12-31T00:00:00</StockTransactionDate>
            <Reference>STK TAKE</Reference>
            <Details>Whiteboard - Drywipe (1000 x 1500)</Details>
            <Qty>2</Qty>
            <CostPrice>17</CostPrice>
            <SalesPrice>0</SalesPrice>
            <StockTransactionNumber>2</StockTransactionNumber>
        </StockTransaction>
    </StockTransactions>
</Company>
```
